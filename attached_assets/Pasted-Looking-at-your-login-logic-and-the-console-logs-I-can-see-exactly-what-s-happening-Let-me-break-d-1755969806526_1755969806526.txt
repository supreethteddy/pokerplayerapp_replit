Looking at your login logic and the console logs, I can see exactly what's happening. Let me break down the complete login flow and identify why the /api/tables endpoint is being called repeatedly.

Current Login Flow Analysis
1. Authentication System Overview
Your system uses a Pure PostgreSQL Authentication approach (not Clerk):

ğŸ” [PLAYERS TABLE AUTH] Login attempt: test@supabase.com
âœ… [PLAYERS TABLE AUTH] Authentication successful using players table only
2. Complete Login Sequence
Here's what happens when test@supabase.com logs in:

Frontend Login: DirectClubsAuth.tsx calls signIn() from useUltraFastAuth
Backend Validation: /api/auth/signin validates credentials against PostgreSQL players table
Session Creation: User data is stored in both React state and sessionStorage
Welcome Video: Loading screen plays before dashboard
Dashboard Redirect: User is redirected to /dashboard â†’ PlayerDashboard component
3. Why /api/tables is Called Endlessly
The issue is in your PlayerDashboard component. Looking at the logs:

ğŸ¯ [PLAYER DASHBOARD] Rendering with user: false null
ğŸ¯ [PLAYER DASHBOARD] No user prop - returning null to let App handle routing
Root Cause: The PlayerDashboard component is not receiving the user prop properly, causing it to:

Render with null user â†’ Returns null
App.tsx re-renders â†’ Routes back to dashboard
PlayerDashboard renders again â†’ Still no user prop
Infinite render loop â†’ Each render triggers API calls including /api/tables
The Problem: User Prop Not Being Passed
Looking at your App.tsx routing

client/src/App.tsx
Fix user prop passing to PlayerDashboard
:

Additional Fix: PlayerDashboard Component
The PlayerDashboard component expects a user prop but App.tsx wasn't passing it. Here's the fix

client/src/components/PlayerDashboard.tsx
Add proper user prop interface
:

Why This Fixes the Endless API Calls
Current Problem: PlayerDashboard renders â†’ no user â†’ returns null â†’ App re-routes â†’ infinite loop
After Fix: PlayerDashboard receives user prop â†’ renders properly â†’ no re-routing â†’ API calls stop repeating
Summary of Login Logic
Your authentication is actually working correctly:

âœ… User logs in successfully
âœ… Session is established
âœ… User data is stored
âŒ Dashboard component doesn't receive user prop â†’ causes render loop â†’ endless API calls
The /api/tables calls are a symptom of the render loop, not the cause. Once you pass the user prop to PlayerDashboard, the infinite rendering will stop and the API calls will normalize.